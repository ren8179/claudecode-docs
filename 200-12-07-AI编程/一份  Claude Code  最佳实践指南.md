 [[Article]] [[Claude Code  实用指南]] [[AI编程工具]] [[技术教程]] [[最佳实践]] [[实战经验]] [[开发效率]]
#ClaudeCode
# [一份  Claude Code  最佳实践指南](https://mp.weixin.qq.com/s/uYSowe55VLvROmG2o2dsLg)

用了差不多 2 个月的 Claude Code，100 刀的 Max 计划，基本每天都能用到受限，算是真正深度使用了。在使用的过程中，Claude Code 也在快速进化，几乎每天都有新的版本；同时我自己使用 Claude Code 的体感也在不断进化中，越来越找准那个感觉了。

用 Claude Code 这么久，一个明显的变化是，最开始用 Claude Code，它可能主要是辅助完成一些任务；现在是以它为主，我主要负责把问题想清楚、描述清楚，然后确认最终的效果、以及验收代码。越来越像是，雇了一个实习生来做具体的执行，我自己只负责布置任务和监督执行。AI 编程这个领域，Claude Code 是当之无愧的王者。

之前听播客，一个嘉宾分享，说是最新消息 Claude Code 的 ARR（年化营收）已经超过 Cursor 了，而且增长的势头还非常凶猛。回过头来看，有些感慨。Claude Code 没出来之前，Cursor 是这个领域的王者，被大家各种夸；现在有了 Claude Code，很多人都纷纷退订 Cursor，转投 Claude Code，因为 Claude Code 确实更好用。商业领域的竞争就是这个样子，很无情，也很残酷。

好了，废话不多说，开始今天的正题。今天这篇，主要把深度使用 Claude Code 两个月的经验做一个总结，帮助现在才开始使用的朋友，少走一些弯路吧。

## CLAUDE.md

把自己编码过程中，要遵守的一些原则，通过记忆的方式，写入到 CLAUDE.md 中，具体是通过 `/memory` 命令来编辑这个文件的。

写好上面这个文件只是第一步，但很多时间 Claude Code 都会忘掉。所以，我的第一个经验是，在每次做一个任务的时候，把任务描述完之后，都要多加上一句"**确保代码严格遵守我在 CLAUDE.md 中的原则**"，有了这句之后，整体就会好很多。

以下是我的一个项目中 CLAUDE.md 的配置，给大家打个样，大家可以根据自己项目实际的情况写好自己的：

![](ReadItLater%20Inbox/assets/一份%20%20Claude%20Code%20%20最佳实践指南-xnm3WiKss1.png)

## 任务拆解

任务拆解是非常关键的一步，如果不拆解，对于比较大的任务，可能会出现两类问题：

一类问题是，因为问题比较大、比较复杂，实现过程中需要消耗的 Token 会非常多，会超过一次会话的上下文，这时候就需要上下文压缩。这样整体效果会很不可控，最终的结果也差强人意。

另一类问题是，问题比较大、比较复杂的时候，导致来回对话的轮数变多、上下文变长，这时候 Claude Code 可能会把前面的一些要求给“遗忘”掉。这个是大模型产品的特点，在上下文比较长的时候，就是会有这样的情况。

因此，在开始做一件事情的时候，要进行详细的设计，要能够把每个任务都拆解得足够小，然后每次只执行一个小任务，执行完成后立即用`/clear`清理上下文，这样用下来整体也会比较节约 Token。

拿我最近做的一个重构任务来举例，我发现代码中有大量的地方定义了差不多类型的功能，于是就想重构一个通用的组件，来让代码架构更加优雅一些。

我的做法是，先让 Claude Code 完成开发一个通用的组件，把要求给他描述清楚。等他开发完，而且写了 Demo 让我确认了效果，第一步就完成了。

第二步，我开始用这个通用的组件，让它每次重构一个当前代码中有类似功能的模块。每次只重构一个地方，过程中有问题调整起来也很敏捷。基本能做到对话两、三轮就完成一处的重构，非常高效。

## 任务描述

任务描述也很重要，要把给 Claude Code 布置任务，当成是用 ChatGPT / DeepSeek 这样的 Chatbot 一样，要遵循一些写好提示词的基本原则。

一个最基本的原则，是要清晰和具体。打个比方就是，你带了一个刚走出校园的实习生，你给他布置任务的时候，要尽可能非常具体地把任务给描述清楚才行。如果只是给一个模糊的指令，实习生一脸蒙圈，最终执行的结果也会一塌糊涂。

对于 Claude Code，我们要把要做的事情给它描述清楚，如果有参考的图、用到的文件都可以直接提供给他。

Claude Code 虽说是命令行工具，但它支持复制图片进去，这一点非常赞。尤其对于一些前端项目，就可以直接把 UI 设计图提供给他，让它有一个具象的参考，整体效果比用语言描述要好很多。

至于找到的文件，可以直接通过`@`的方式提及，这样 Claude Code 就不用为了理解问题，再去搜索大量的文件了。因为 Claude Code 本身不是基于 RAG 做的，他都是通过调用一些工具，实时搜索、阅读文件的，我们如果明确给它指定了的话，整个理解问题的过程会高效很多。

下面是我的一个重构任务的描述，是一个具体的例子：

![](ReadItLater%20Inbox/assets/一份%20%20Claude%20Code%20%20最佳实践指南-KeMal5NUT0.png)

## 开启 Plan Mode

我之前的习惯是，让 Claude Code 先跟我进行讨论，讨论好方案后然后再开始执行。后来发现官方直接支持了 Plan Mode，可以通过 Shift + Tab 打开。

每一个新的任务上来，首先要清晰具体地描述任务，描述写好之后，先不要着急开始执行。打开 Plan Mode，让 Claude Code 先进行问题理解和规划，等他给出详细的规划方案之后，要对方案进行仔细地确认。

这一步非常关键，是决定最终执行效果好坏的核心因素。如果发现方案中有问题，要明确指出来，让 Claude Code 继续优化方案。最后，直到觉得它给的方案就是自己想要的、没啥问题了，再开始让它执行。

方案确认过了，开始执行的时候，就可以打开自动接受编辑(Accept Edits)模式，这样不用每一步都确认，整体的效率也会高很多。

有了规划过程，相当于是把我们的任务进行了一次详细的理解和拆解，有了这样一份详细的“规划”，再去执行整体的结果就会更加受控。这跟我们人类做事情也挺像的，有了详细的计划做事情，就能把事情做得更加漂亮。

## 代码 Review

确认代码效果 OK 后，最后一步就是要进行代码 Review。

按前所述，我会在每个任务后面加上"**确保代码严格遵守我在 CLAUDE.md 中的原则**"，理论上就不需要代码 Review 了啊，那为什么还要进行 Review 呢？

通常，对于比较小的任务，确实像上面这样做了之后，整体的代码质量是不错的。任务完成了，自己把修改的内容快速看一遍，没啥问题确实就可以不用再 Review，可以直接提交了。

但是，对于稍微复杂一些的任务，整个上下文会比较长，这时候就会发现 Claude Code 会把一些代码的原则给"遗忘"掉，会写出一些不符合 CLAUDE.md 中原则的代码。这时候代码 Review 就是很有必要的了，要不然时间一长，代码库就变成四不像了，很难继续开发和维护了。

我试过在 Claude Code 定义 subagent 来进行代码 Review，整体的效果不太好，主要的问题是，代码原则中的规则比较多的时候，Claude Code 好像经常会顾此失彼。

因此，我实践下来目前的做法不是通过直接写提示词的方式，主要的原则还是让它按照 CLAUDE.md 中的规范，但每一轮有一个侧重点。比如说，关于代码风格方面，我会给 Claude Code 说："请按照我在 CLAUDE.md 中的原则，详细 review 当前代码，确保它符合所有的格式规范。"最后的时候，我还会再让他来一轮："请详细 review 当前代码，把不必要的修改都清理掉"。